# next3d - مخطط غرف تفاعلي (Next.js + R3F)

تطبيق تفاعلي لتخطيط الغرف ثنائي وثلاثي الأبعاد. يمكنك رسم مخطط أرضي ثنائي الأبعاد، ثم التصميم بطريقة ثلاثية الأبعاد من خلال وضع الأبواب والنوافذ والأثاث والديكور. تم بناؤه باستخدام Next.js App Router وreact-three-fiber وdrei وthree.js وZustand وTailwind.

تم التحديث: 2025-08-12

## التقنيات المستخدمة

- بيئة التشغيل: Next.js 15 (App Router, Turbopack), React 19, TypeScript
- التقنيات ثلاثية الأبعاد: three, @react-three/fiber, @react-three/drei
- إدارة الحالة: Zustand
- واجهة المستخدم: Tailwind v4, Radix UI (مكونات بأسلوب shadcn)

## تشغيل المشروع محلياً

1) تثبيت الاعتماديات: `npm i`
2) تشغيل خادم التطوير: `npm run dev`
3) يعمل التطبيق على العنوان http://localhost:3000

## الهيكل العام للتطبيق

- هيكل التطبيق: `app/page.tsx` يتبدل بين وضعين مخزنين في مخزن المخطط (Zustand):
  - المخطط الأرضي (ثنائي الأبعاد): `components/floorplanner-canvas.tsx`
  - التصميم (ثلاثي الأبعاد): `components/room-canvas.tsx`
- الشريط الجانبي + الشريط العلوي: تبديل الأوضاع، حفظ/تحميل، بناء ثلاثي الأبعاد، وإعدادات الأرضية.
- الحالة العامة: `lib/store.ts` هو المصدر الوحيد للحقيقة لـ:
  - التبويب، العناصر الموضوعة، التحديد، وضع التحويل
  - مضلع الأرضية، الجدران المحسوبة (مع المتجهات العمودية الخارجية)، مركز الغرفة
  - تصميم الأرضية (اللون/النسيج)، ارتفاع/سماكة الجدار
  - مراجع للكائنات ثلاثية الأبعاد الحية (للتحويلات)
- الأنواع: `types.ts` (PlannerStateTab, FurnitureKind, PlacedItem، إلخ.)
- الكتالوج: `lib/items.ts` (قائمة منسقة من العناصر التي ترتبط بملفات GLB تحت public/assets)

## كيفية الاستخدام

1. **وضع المخطط الأرضي (Floorplan)**:
   - استخدم أدوات الرسم لإنشاء مخطط الغرفة
   - يمكنك إضافة نقاط، تحريكها، أو حذفها
   - اضغط على "Build 3D" للانتقال إلى وضع التصميم ثلاثي الأبعاد

2. **وضع التصميم (Design)**:
   - أضف الأثاث والديكور من القائمة الجانبية
   - حدد العناصر لتحريكها أو تدويرها أو تغيير حجمها
   - يمكنك تغيير لون الأرضية أو إضافة نسيج
   - احفظ تصميمك أو قم بتحميل تصميم سابق

## نصائح مفيدة

- استخدم مفتاح Shift للالتصاق بالشبكة عند رسم المخطط الأرضي
- يمكنك تدوير العناصر المحددة باستخدام أدوات التحويل
- الجدار الأمامي يختفي تلقائياً لرؤية أفضل للتصميم الداخلي
- يمكنك حفظ تصميمك كملف JSON وإعادة تحميله لاحقاً

## المساهمة في المشروع

نرحب بمساهماتكم! إذا كنت ترغب في المساهمة، يرجى اتباع الخطوات التالية:

1. قم بعمل fork للمشروع
2. قم بإنشاء فرع جديد لميزتك (`git checkout -b feature/amazing-feature`)
3. قم بإجراء تغييراتك وتسجيلها (`git commit -m 'إضافة ميزة رائعة'`)
4. ارفع التغييرات إلى الفرع الخاص بك (`git push origin feature/amazing-feature`)
5. افتح طلب سحب (Pull Request)